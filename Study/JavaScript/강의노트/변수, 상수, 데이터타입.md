# 변수, 상수, 데이터 타입, 호이스팅, 스코프체인

## CPU Operation

- 트랜지스터의 연산 : 덧셈 연산은 OR과 XOR 연산을 사용한다.
- CPU와 Mem : CPU와 Mem 사이의 속도 차이를 개선하기 위하여 Cache 가 CPU 내에 존재한다.
- Code : 코드(JS, Java) > 컴파일러/인터프리터에 의해 > 바이트코드 > 최종적으로 > Machine Language 로 번역된다. 바이트코드의 경우 기계어와 고급언어 사이의 중간 형태이다. Machine Language는 CPU등 Device에 따라 상이하다(의존성을 가진다).

## 선언과 정의(Declaration & Definition)

- 선언 : JS엔진에 식별자의 존재를 알리는 것
- 정의 : 선언 이후에 메모리에 실제 값을 할당하는 것
- 리터럴 : 값을 만드는 방법(숫자,문자,불리언,null,undefined,객체,배열,함수,정규표현식)
- JS 엔진은 평가 단계가 있고 실행 단계가 있다

## 변수(Variable)과 상수(Constant)의 선언

> var, let, const 가 있다

- var : ES5이전까지 사용했음, 스코프의 단위가 function scope
- let,const : 사용 권장! 동일 스코프 내에서 중복 선언 방지, 특히 const는 값을 변경할 수 없다, 스코프의 단위가 block scope

## function scope 와 block scope

### 동적 측면 Scope

- 정적 스코프 : 함수가 정의될 때의 scope 그대로 유지되는것
- 동적 스코프 : 함수가 호출되는 위치에 따라 scope 가 달라지는 것

### 레벨 측면 Scope

- 전역/지역 스코프
- 함수/블록 스코프

변수는 스코프 내에 존재한다. 스코프에 따라 변수의 값이 다르게 읽힐 수 있다.

## 호이스팅(hoisting)과 Scope Chain

- const,var,let, function 모두 호이스팅이 발생한다. 다만, 호이스팅이 발생하였을때 어떤 스코프의 제일 상단으로 이동할지 만 차이가 난다. const,let은 블록 스코프의 최상위로 이동하며, var은 함수 스코프의 최상위로 이동한다.

- 호이스팅 : 평가 단계에서 선언문을 만나면 끌어 올리는 것
- Scope Chain : 외부에서 내부 함수의 변수는 접근이 불가하다. 단, 내부 함수에서 외부 함수의 변수는 접근 가능하다.

## 데이터 타입

- 원시타입 : Primitive Type, Call by Value
- 객체타입(Object) : Call by Reference

### 예시

#### Primitive Type이 경우

> let n = 2;

> n = 5;

> let m = 5;

- n,m은 Primitive Type 이다.
- n이 가리키는 메모리 주소는 &1 이며, 최초에는 해당 주소에 값 '2' 가 직접 저장된다.
- n = 5 에 의해 새로운 메모리 주소 &2에 값 '5' 가 저장되고, n이 가리키는 메모리 주소가 &2로 변경된다.
- m이 가리키는 메모리 주소는 &3이며, 해당 주소에 값 '5'가 저장된다.

결론: n===m 이 아니다

#### Object인 경우

> a1 = [1,2];

> a1 = [1,2,3,4,5];

> a2 = [1,2,3,4,5];

- a1과 a2가 가리키는 메모리 주소에는 실제로 해당 object 값이 들어가지 않고, HEAP영역을 가리키는 주소값만 들어간다.
- a1 === a2 가 아니다

> a1 = a2

- 다만, 위와 같이 실행 시 a2가 가리키던 메모리 주소값이 그대로 a1에 저장되므로 a1 === a2 가 된다.

## 타입 변환

### 명시적 타입 변환

> arr = [1,2];

> arr.toString();

등 개발자가 의도적으로 타입을 변화시킨 경우

### 암묵적 타입 변환

> s = n + '1';

등 처리 과정에서 자동으로 타입이 변환되는 경우

- 주의 : 2 + '1' 은 '21' 을 반환하지만, 2 - '1' 은 1을 반환한다. +만 String으로 변환되기 때문이다.
- 주의 : +'1' + 2 은 3을 반환한다. '1'앞에 붙은 + 에 의해 '1'이 1로 숫자 암묵적 타입 변화가 발생하기 때문이다.

### 일시적 객체로의 변환

Primitive Type이 일시적으로 Wrapper Object로 변환되는 현상.

> s = 'ABC'

> s.toLocaleLowerCase()

순간적으로 s가 위 명령줄 라인에서 Object로 변화하기 때문에, toLocaleLowerCase() 메소드를 사용할 수 있게 된다.
